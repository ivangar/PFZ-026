<script type="text/javascript">
    /*$.noConflict();*/
     $(document).ready(function () {
       $("#submit_evaluation").click(function(){
         var filledOut=true;
         var theAnswers = [];

         //check q1
         if(document.getElementById("textQ1").value===""){
          filledOut=false;
          document.getElementById("noQuestion1").style.display='block';
         }
         else{
          theAnswers.push(document.getElementById("textQ1").value);
          document.getElementById("noQuestion1").style.display='none';
         }

         //check q2
         if(document.getElementById("radioYesQ2").checked){
          if(document.getElementById("textQ2").value===""){
            filledOut = false;
            document.getElementById("noQuestion2").style.display='block';
          }
          else{
            theAnswers.push("YES: " + document.getElementById('textQ2').value);
            document.getElementById("noQuestion2").style.display='none';
          }
         }
         else if(document.getElementById('radioNoQ2').checked){
          theAnswers.push("No");
          document.getElementById("noQuestion2a").style.display='none';
          document.getElementById("noQuestion2").style.display='none';
         }
         else{
          document.getElementById("noQuestion2a").style.display='block';
          filledOut = false;
         }

         //check q3
         if(document.getElementById("textQ3").value===""){
          filledOut=false;
          document.getElementById("noQuestion3").style.display='block';
         }
         else{
          document.getElementById("noQuestion3").style.display='none';
          theAnswers.push(document.getElementById("textQ3").value);
         }

         //check q4
         if(document.getElementById("textQ4").value===""){
          filledOut=false;
          document.getElementById("noQuestion4").style.display='block';
         }
         else{
          document.getElementById("noQuestion4").style.display='none';
          theAnswers.push(document.getElementById("textQ4").value);
         }

         //check q5
         if(document.getElementById("radioYesQ5").checked){
          if(document.getElementById("textQ5").value===""){
            filledOut = false;
            document.getElementById("noQuestion5").style.display='block';
            document.getElementById("noQuestion5a").style.display='none';
          }
          else{
            theAnswers.push("YES: " + document.getElementById('textQ5').value);
            document.getElementById("noQuestion5").style.display='none';
            document.getElementById("noQuestion5a").style.display='none';
          }
         }
         else if(document.getElementById('radioNoQ5').checked){
          theAnswers.push("No");
          document.getElementById("noQuestion5a").style.display='none';
          document.getElementById("noQuestion5").style.display='none';
         }
         else{
          document.getElementById("noQuestion5a").style.display='block';
          filledOut = false;
         }

         //check q6
         if(document.getElementById("textQ6").value===""){
          theAnswers.push("NULL");
         }
         else{
          theAnswers.push(document.getElementById("textQ6").value);
         }


        if(filledOut){
                       
            var evaluation_submitted = {"qas": theAnswers};
            target = "resources/process_evaluation.php";

            $.ajax({
                url: target,
                cache: false,
                type: "POST",
                dataType: "html",
                data: evaluation_submitted
              }) 

            .done(function( data ) {
                if (data === "failed"){
                      $( ".parsley-container.evaluation" ).html( "<ul> <li>To submit the evaluation you must answer all questions.</li></ul>" );
                      $( ".parsley-container.evaluation" ).show();
                      $("html, body").animate({
                        scrollTop: 0
                      }, 500);     
                }

                if (data === "completed"){
                    document.location.reload(true); //reload page in order to update access to post-test form
                }
                
            })
            .fail(function() {
                  $( ".parsley-container.evaluation" ).html( "<ul> <li>We are sorry, the questions were not submitted. Try again. </li></ul>" );
                  $( ".parsley-container.evaluation" ).show();
                      $("html, body").animate({
                        scrollTop: 0
                      }, 500);     
            }); //ajax call

        }
        else{
          console.log("form not filled out.");
        }


       });
    });
</script>



<table border="0" cellspacing="0">
  <tr valign="top">
    <td style="padding:0;width:685px;">
        <form class="jotform-form" action="" method="post" data-ajax="false" name="PFZ-026" id="PFZ-026" accept-charset="utf-8">
          <div class="program_eval" style="width:685px;">
            <ul class="form-section">
              <li class="form-line-custom"  style="margin:0;padding-top:0;padding-bottom:10px;">
                <div  style="margin:0;">
                  <div class="form-html" style="padding:0;">
                      <h2>
                      An Update on the Safety of Smoking-cessation Therapies
                    </h2>
                     <h2>Program Evaluation:</h2>
                  </div>
                  <hr />
                </div>
              </li>
                <!--QUESTION 1-->
              <li class="form-line-custom" id="program_q_1" style="background-color: rgb(224, 224, 224);padding: 5px 16px;border: 1px solid;">
                <label class="form-label-top eval_label" for="eval_q_4"> 1. Describe two positive features of this program </label>
                <div id="pfz_1_Evaluation" class="form-input-wider">
                  <textarea name="textarea" id="textQ1" maxlength="500" resize="none" rows="4" cols="50" style="width:640px; height:100px"></textarea>
                  <div class="eval_q_1 form-textarea-limit-indicator evaluation" style="padding-right: 33px;">Max number of characters 500 </div>
                </div>
              </li>

              <!--QUESTION 2-->


                <!--Javascript to enable/disable text area -->
              <script>
              function enableTextQ2(){
                document.getElementById("textQ2").disabled = false;
                document.getElementById("textQ2").style.opacity=1;
              }
              function disableTextQ2(){
                document.getElementById("textQ2").disabled = true;
                document.getElementById("textQ2").style.opacity=0.5;
              }
              </script>



              <li class="form-line-custom" id="program_q_2" style="background-color: rgb(224, 224, 224);padding: 5px 16px;border: 1px solid;">
                <label class="form-label-top eval_label" for="eval_q_2"> 2. Would you change anything about the program? </label>
              
              <!--Radio button Table-->
              <table>
                <tr><td>
                  <input id="radioYesQ2" type="radio" name="question_2" value="question_2_yes" onchange="enableTextQ2();"> <span style="color: #666666;font-family: Arial, Helvetica, sans-serif;font-size:14px;font-weight:bold">Yes</span><br>
                </td><td>
                  <input id="radioNoQ2" type="radio" name="question_2" value="question_2_no" onchange="disableTextQ2();"> <span style="color: #666666;font-family: Arial, Helvetica, sans-serif;font-size:14px;font-weight:bold">No</span>
                </td></tr>
              </table>


                <label class="form-label-top eval_label" for="eval_q_2">
                  If yes, please explain. </label>
                <div id="pfz_2_Evaluation" class="form-input-wider">
                  <textarea id="textQ2" name="textarea" maxlength="500" resize="none" rows="4" cols="50" style="width:640px; height:100px; opacity:0.5" disabled></textarea>
                  <div class="eval_q_2 form-textarea-limit-indicator evaluation" style="padding-right: 33px;">Max number of characters 500 </div>
                </div>
              </li>

              <!--QUESTION 3-->
              <li class="form-line-custom" id="program_q_3" style="background-color: rgb(224, 224, 224);padding: 5px 16px;border: 1px solid;">
                <label class="form-label-top eval_label" for="eval_q_3"> 3. What did you learn from this program that you plan to use in your practice? </label>
                <div id="pfz_3_Evaluation" class="form-input-wider">
                  <textarea name="textarea" id="textQ3" maxlength="500" resize="none" rows="4" cols="50" style="width:640px; height:100px"></textarea>
                  <div class="eval_q_1 form-textarea-limit-indicator evaluation" style="padding-right: 33px;">Max number of characters 500 </div>
                </div>
              </li>

              <!--QUESTION 4-->
              <li class="form-line-custom" id="program_q_4" style="background-color: rgb(224, 224, 224);padding: 5px 16px;border: 1px solid;">
                <label class="form-label-top eval_label" for="eval_q_4"> 4. What other educational needs would you like to have addressed regarding smoking-cessation therapy?  </label>
                <div id="pfz_4_Evaluation" class="form-input-wider">
                  <textarea name="textarea" id="textQ4" maxlength="500" resize="none" rows="4" cols="50" style="width:640px; height:100px"></textarea>
                  <div class="eval_q_1 form-textarea-limit-indicator evaluation" style="padding-right: 33px;">Max number of characters 500 </div>
                </div>
              </li>

                <!--QUESTION 5-->
              <script>
              function enableTextQ5(){
                document.getElementById("textQ5").disabled = false;
                document.getElementById("textQ5").style.opacity=1;
              }
              function disableTextQ5(){
                document.getElementById("textQ5").disabled = true;
                document.getElementById("textQ5").style.opacity=0.5;
              }
              </script>

              <li class="form-line-custom" id="program_q_5" style="background-color: rgb(224, 224, 224);padding: 5px 16px;border: 1px solid;">
                <label class="form-label-top eval_label" for="eval_q_5"> 5. Did you perceive any degree of commercial bias in any part of the program?  </label>
              
              <table>
                <tr><td>
                  <input id="radioYesQ5" type="radio" name="question_5" value="question_5_yes" onchange="enableTextQ5();"><span style="color: #666666;font-family: Arial, Helvetica, sans-serif;font-size:14px;font-weight:bold"> Yes</span>
                </td><td>
                  <input id="radioNoQ5" type="radio" name="question_5" value="question_5_no" onchange="disableTextQ5();"> <span style="color: #666666;font-family: Arial, Helvetica, sans-serif;font-size:14px;font-weight:bold">No</span>
                </td></tr>
              </table>
              
                <label class="form-label-top eval_label" for="eval_q_2">
                  If yes, please explain. </label>
                <div id="pfz_2_Evaluation" class="form-input-wider">
                  <textarea id="textQ5" name="textarea" maxlength="500" resize="none" rows="4" cols="50" style="width:640px; height:100px; opacity:0.5" disabled></textarea>
                  <div class="eval_q_5 form-textarea-limit-indicator evaluation" style="padding-right: 33px;">Max number of characters 500 </div>
                </div>
              </li>

                <!--QUESTION 6-->
              <li class="form-line-custom" id="program_q_6" style="background-color: rgb(224, 224, 224);padding: 5px 16px;border: 1px solid;">
                <label class="form-label-top eval_label" for="eval_q_6"> 6. General comments and suggestions: </label>
                <div id="pfz_4_Evaluation" class="form-input-wider">
                  <textarea name="textarea" id="textQ6" maxlength="500" resize="none" rows="4" cols="50" style="width:640px; height:100px"></textarea>
                  <div class="eval_q_1 form-textarea-limit-indicator evaluation" style="padding-right: 33px;">Max number of characters 500 </div>
                </div>
              </li>
              <li id="eval_actions">
                <div id="cid_eval_actions" >
                  <div style="padding:0 10px 0 10px;" class="form-buttons-wrapper">
                    <button id="submit_evaluation" type="button" class="big-form-button">Submit</button>
                    <button id="reset_eval_form" type="reset" class="form-submit-reset big-form-button">Clear Form</button>
                  </div>
                </div>
              </li>
              <li id="notFilledOut">
                <p id="noQuestion1" style="display:none; color:red; font-size:10px">Question 1 not filled out</p>
                <p id="noQuestion2" style="display:none; color:red; font-size:10px">Question 2 not filled out</p>
                <p id="noQuestion2a" style="display:none; color:red; font-size:10px">Question 2 not answered</p>
                <p id="noQuestion3" style="display:none; color:red; font-size:10px">Question 3 not filled out</p>
                <p id="noQuestion4" style="display:none; color:red; font-size:10px">Question 4 not filled out</p>
                <p id="noQuestion5" style="display:none; color:red; font-size:10px">Question 5 not filled out</p>
                <p id="noQuestion5a" style="display:none; color:red; font-size:10px">Question 5 not answered</p>
              </li>
            </ul>
          </div>
        </form>
</td>
  </tr>
</table>